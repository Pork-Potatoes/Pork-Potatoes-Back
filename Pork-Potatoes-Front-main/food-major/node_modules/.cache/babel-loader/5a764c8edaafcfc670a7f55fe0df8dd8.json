{"ast":null,"code":"import _regeneratorRuntime from\"/Users/minjukim/Documents/GitHub/Pork-Potatoes-Back/Pork-Potatoes-Front-main/food-major/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/minjukim/Documents/GitHub/Pork-Potatoes-Back/Pork-Potatoes-Front-main/food-major/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/minjukim/Documents/GitHub/Pork-Potatoes-Back/Pork-Potatoes-Front-main/food-major/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/minjukim/Documents/GitHub/Pork-Potatoes-Back/Pork-Potatoes-Front-main/food-major/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/minjukim/Documents/GitHub/Pork-Potatoes-Back/Pork-Potatoes-Front-main/food-major/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/minjukim/Documents/GitHub/Pork-Potatoes-Back/Pork-Potatoes-Front-main/food-major/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import _taggedTemplateLiteral from\"/Users/minjukim/Documents/GitHub/Pork-Potatoes-Back/Pork-Potatoes-Front-main/food-major/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject,_templateObject2,_templateObject3;import React from\"react\";import axios from\"axios\";import _ from'lodash';import styled from\"styled-components\";import https from\"https\";import Review from\"../components/Review\";import Pagination from\"../components/Pagination\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Contents=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  display: flex;\\n  flex-direction: column;\\n  align-items: center;\\n  justify-content: center;\\n  width: 2400px;\\n\"])));var Container=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  display: flex;\\n  flex-direction: column;\\n  align-items: start;\\n  justify-content: center;\\n\"])));var Grid=styled.div(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n  display: grid;\\n  grid-template-columns: 1fr 1fr 1fr;\\n  grid-template-rows: 1fr 1fr;\\n\"])));var agent=new https.Agent({rejectUnauthorized:false});var MyReviewPage=/*#__PURE__*/function(_React$Component){_inherits(MyReviewPage,_React$Component);var _super=_createSuper(MyReviewPage);function MyReviewPage(props){var _this;_classCallCheck(this,MyReviewPage);_this=_super.call(this,props);_this.getReviews=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$axios$get,reviews;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"https://www.matzipmajor.com/api/reviews/recent\",{httpsAgent:agent});case 3:_yield$axios$get=_context.sent;reviews=_yield$axios$get.data;_this.setState({reviews:reviews,isLoading:false});_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);console.log(\"getReviews error\");case 11:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);}));_this.state={reviews:[],currentPage:1,isLoading:true};return _this;}_createClass(MyReviewPage,[{key:\"componentDidMount\",value:function componentDidMount(){this.getReviews();}},{key:\"render\",value:function render(){var _this2=this;var _this$state=this.state,isLoading=_this$state.isLoading,reviews=_this$state.reviews;var handlePageChange=function handlePageChange(page){_this2.setState({currentPage:page});};var paginate=function paginate(reviews,pageNumber){var startIndex=(pageNumber-1)*6;return _(reviews).slice(startIndex).take(6).value();};var pagedReviews=paginate(reviews,this.state.currentPage);var count=reviews.length;return/*#__PURE__*/_jsxs(Contents,{children:[isLoading?/*#__PURE__*/_jsx(\"div\",{style:{width:\"100%\",height:\"100vh\",display:\"flex\",alignItems:\"center\",justifyContent:\"center\"},children:/*#__PURE__*/_jsx(\"span\",{style:{fontWeight:\"500\"},children:\"Loading...\"})}):/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(\"h1\",{style:{margin:\"15px\",paddingBottom:\"30px\"},children:\"\\uB0B4\\uAC00 \\uC4F4 \\uB9AC\\uBDF0\"}),/*#__PURE__*/_jsx(Grid,{children:Object.values(pagedReviews).map(function(review){return/*#__PURE__*/_jsx(Review,{image:review.filePath,content:review.content,restaurantName:review.restaurant.restaurantName,menuName:review.menuName,tagFood:review.tagFood,tagMood:review.tagMood,score:review.score,url:review.url},review.id);})})]}),/*#__PURE__*/_jsx(Pagination,{itemsCount:count,currentPage:this.state.currentPage,onPageChange:handlePageChange})]});}}]);return MyReviewPage;}(React.Component);export default MyReviewPage;","map":{"version":3,"sources":["/Users/minjukim/Documents/GitHub/Pork-Potatoes-Back/Pork-Potatoes-Front-main/food-major/src/pages/MyReviewPage.js"],"names":["React","axios","_","styled","https","Review","Pagination","Contents","div","Container","Grid","agent","Agent","rejectUnauthorized","MyReviewPage","props","getReviews","get","httpsAgent","reviews","data","setState","isLoading","console","log","state","currentPage","handlePageChange","page","paginate","pageNumber","startIndex","slice","take","value","pagedReviews","count","length","width","height","display","alignItems","justifyContent","fontWeight","margin","paddingBottom","Object","values","map","review","filePath","content","restaurant","restaurantName","menuName","tagFood","tagMood","score","url","id","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport axios from \"axios\";\nimport _ from 'lodash';\nimport styled from \"styled-components\";\nimport https from \"https\"\nimport Review from \"../components/Review\";\nimport Pagination from \"../components/Pagination\";\n\nconst Contents = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  width: 2400px;\n`\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: start;\n  justify-content: center;\n`\nconst Grid = styled.div`\n  display: grid;\n  grid-template-columns: 1fr 1fr 1fr;\n  grid-template-rows: 1fr 1fr;\n`\n\nconst agent = new https.Agent({\n  rejectUnauthorized: false\n});\n\nclass MyReviewPage extends React.Component {\n  constructor(props){\n    super(props);\n    this.state = {\n      reviews: [],\n      currentPage: 1,\n      isLoading: true\n    }\n  }\n  getReviews = async () => {\n    try{\n      const {data: reviews} = await axios.get(\"https://www.matzipmajor.com/api/reviews/recent\", {httpsAgent: agent});\n      this.setState({ reviews, isLoading: false });\n    }\n    catch(e){\n      console.log(\"getReviews error\");\n    }\n  }\n  componentDidMount() {\n    this.getReviews();\n  }\n\n  render() {\n    const {isLoading, reviews} = this.state;\n    const handlePageChange = (page) => {\n      this.setState({currentPage: page});\n    };\n    const paginate = (reviews, pageNumber) => {\n      const startIndex = (pageNumber-1) * 6;\n      return _(reviews)\n        .slice(startIndex)\n        .take(6)\n        .value();\n    }\n    const pagedReviews = paginate(reviews, this.state.currentPage);\n    const {length: count} = reviews;\n    return(\n      <Contents>\n        {isLoading\n        ? (\n          <div style={{width:\"100%\", height: \"100vh\", display:\"flex\", alignItems:\"center\", justifyContent:\"center\"}}>\n            <span style={{fontWeight:\"500\"}}>Loading...</span>\n          </div>\n        )\n        : (\n          <Container>\n            <h1 style={{margin:\"15px\", paddingBottom:\"30px\"}}>내가 쓴 리뷰</h1>\n            <Grid>\n              {Object.values(pagedReviews).map( (review) =>\n                <Review key={review.id}\n                  image={review.filePath}\n                  content={review.content}\n                  restaurantName={review.restaurant.restaurantName}\n                  menuName={review.menuName}\n                  tagFood={review.tagFood}\n                  tagMood={review.tagMood}\n                  score={review.score}\n                  url={review.url} />\n              )}\n            </Grid>\n          </Container>\n        )}\n        <Pagination\n          itemsCount={count}\n          currentPage={this.state.currentPage}\n          onPageChange={handlePageChange}\n        />\n      </Contents>\n    );\n  }\n}\n\nexport default MyReviewPage;\n"]},"metadata":{},"sourceType":"module"}