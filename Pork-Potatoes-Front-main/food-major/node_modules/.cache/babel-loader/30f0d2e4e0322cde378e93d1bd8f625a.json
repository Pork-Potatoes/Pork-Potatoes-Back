{"ast":null,"code":"var _jsxFileName = \"/Users/minjukim/Documents/GitHub/Pork-Potatoes-Back/Pork-Potatoes-Front-main/food-major/src/pages/WriteReviewPage.js\",\n    _s = $RefreshSig$();\n\nimport React, { Component, useState } from \"react\";\nimport styled from \"styled-components\";\nimport '../components/Modals/Modal.css';\nimport logo from '../assets/logo.png';\nimport search from '../assets/search.png';\nimport { fontSize } from \"@material-ui/system\";\nimport Rating from '@material-ui/lab/Rating';\nimport ReactStars from \"react-rating-stars-component\";\nimport { makeStyles } from '@material-ui/core/styles';\nimport axios from \"axios\";\nimport https from \"https\";\nimport swal from \"sweetalert\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Input = styled.div`\n    display:flex;\n    justify-content: space-around;\n    align-items: center;\n    border-radius: 4px;\n    box-shadow: 0px 4px 4px rgba(51, 51, 51, 0.08), 0px 4px 16px rgba(51, 51, 51, 0.08);\n    width:35vw;\n    height:5vh;\n    border: none;\n    margin-bottom: 15px;\n`;\n_c = Input;\nconst InputConsol = styled.input`\n    border: none;\n    outline: none;\n    width: 35vw;\n    height: 4vh;\n`;\n_c2 = InputConsol;\nconst InputContent = styled.input`\n    border: gray;\n    outline: none;\n    background-color: #F4F4F4;\n    width: 35vw;\n    height: 20vh;\n    margin-top:14px;\n    margin-bottom: 14px;\n`;\n_c3 = InputContent;\nconst Button = styled.button`\n    background-color: white;\n    border: none;\n    width: 24px;\n    height: 24px;\n`;\n_c4 = Button;\nconst UploadButton = styled.button`\n  width:35vw;\n  height:8vh;\n  margin-top: 10px;\n  background-color: white;\n  border: dashed 1px #999999;\n  text-align: center;\n`;\nconst RegisterButton = styled.button`\n  width:25vw;\n  min-height: 4vh;\n  max-height:8vh;\n  margin-top: 20px;\n  background-color: white;\n  border:solid 1px #BABABA;\n  border-radius: 32px;\n  text-align: center;\n  color:#F06D58;\n`;\n_c5 = RegisterButton;\nconst agent = new https.Agent({\n  rejectUnauthorized: false\n});\n\nfunction WriteReviewPage(props) {\n  _s();\n\n  const {\n    open,\n    closeModal\n  } = props;\n  const [inputRestaurant, setInputRestaurant] = useState('');\n  const [inputMenu, setInputMenu] = useState('');\n  const [inputContent, setInputContent] = useState('');\n  const [score, setScore] = useState(5);\n  const [imageUrl, setImageUrl] = useState(null);\n  const [file, setFile] = useState(null);\n\n  const processImage = event => {\n    const imageFile = event.target.files[0];\n    const url = URL.createObjectURL(imageFile);\n    setImageUrl({\n      url\n    });\n    setFile({\n      imageFile\n    });\n  };\n\n  const successAddReview = () => {\n    swal(\"리뷰가 등록되었습니다.\", {\n      buttons: false,\n      timer: 1000\n    });\n    closeModal();\n  };\n\n  const failAddReview = () => {\n    swal(\"리뷰 등록에 실패했습니다..\", {\n      buttons: false,\n      timer: 1000\n    });\n    closeModal();\n  };\n\n  const inputRestaurantChange = event => {\n    const keyword = event.target.value;\n    setInputRestaurant({\n      keyword\n    });\n  };\n\n  const inputMenuChange = event => {\n    const keyword = event.target.value;\n    setInputMenu({\n      keyword\n    });\n  };\n\n  const inputContentChange = event => {\n    const keyword = event.target.value;\n    setInputContent({\n      keyword\n    });\n  };\n\n  const ratingChanged = newRating => {\n    setScore({\n      newRating\n    });\n  };\n\n  const addReview = async () => {\n    const restaurantObject = await getRestaurant();\n    const userObject = await getUser();\n\n    try {\n      const formData = new FormData();\n      formData.append('file', file);\n      console.log('file ', file);\n      console.log('formData ', formData);\n      console.log('resobj', restaurantObject);\n      console.log('userobj', userObject);\n      console.log(Object.values(inputContent).toString());\n      console.log(parseFloat(Object.values(score).toString()));\n      console.log(new Date());\n      const response = await axios.post('https://www.matzipmajor.com/api/reviews', {\n        \"image\": formData,\n        \"requestDto\": {\n          \"restaurant\": restaurantObject,\n          \"user\": userObject,\n          \"content\": Object.values(inputContent).toString(),\n          \"score\": parseFloat(Object.values(score).toString()),\n          \"anonymousFlag\": true,\n          \"menuName\": Object.values(inputMenu).toString(),\n          \"tagFood\": '분식',\n          \"tagMood\": '회식',\n          \"createdDate\": new Date()\n        }\n      });\n      console.log(response);\n      response.status === 200 ? successAddReview() : failAddReview();\n    } catch (e) {\n      console.log('reviewUpload error');\n    }\n  };\n\n  const getRestaurant = async () => {\n    try {\n      const url = \"https://www.matzipmajor.com/api/search?q=\" + Object.values(inputRestaurant).toString();\n      const restaurantdata = await axios.get(url, {\n        httpsAgent: agent\n      });\n      const resNum = restaurantdata.data[0].restaurantNum;\n      const url2 = \"https://www.matzipmajor.com/api/restaurants/\" + resNum;\n      const restaurantObject = await axios.get(url2, {\n        httpsAgent: agent\n      });\n      return restaurantObject.data;\n    } catch (e) {\n      console.log(\"getRestaurant error\");\n    }\n  };\n\n  const getUser = async () => {\n    try {\n      const url = \"https://www.matzipmajor.com/api/users/\" + 1;\n      const userObject = await axios.get(url, {\n        httpsAgent: agent\n      });\n      return userObject.data;\n    } catch (e) {\n      console.log(\"getUser error\");\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: open ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal\",\n      children: /*#__PURE__*/_jsxDEV(\"section\", {\n        children: [/*#__PURE__*/_jsxDEV(\"header\", {\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: logo,\n            height: \"40px\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 181,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"close\",\n            onClick: closeModal\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 182,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n          children: [/*#__PURE__*/_jsxDEV(Input, {\n            children: [/*#__PURE__*/_jsxDEV(Button, {\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                src: search,\n                alt: \"search\",\n                height: \"15px\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 186,\n                columnNumber: 25\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 186,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(InputConsol, {\n              placeholder: \"\\uB9DB\\uC9D1 \\uC774\\uB984\\uC744 \\uC785\\uB825\\uD574 \\uC8FC\\uC138\\uC694\",\n              onChange: inputRestaurantChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 187,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 185,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            children: [/*#__PURE__*/_jsxDEV(Button, {\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                src: search,\n                alt: \"search\",\n                height: \"15px\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 191,\n                columnNumber: 25\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 191,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(InputConsol, {\n              placeholder: \"\\uBA54\\uB274\\uB97C \\uC785\\uB825\\uD574 \\uC8FC\\uC138\\uC694\",\n              onChange: inputMenuChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 192,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 190,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"text\", {\n            style: {\n              color: \"rgb(17,17,17,0.48)\",\n              fontSize: \"18px\",\n              marginTop: \"11px\"\n            },\n            children: \"\\uC120\\uD0DD\\uD558\\uC138\\uC694\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 195,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(ReactStars, {\n            count: 5,\n            onChange: ratingChanged,\n            size: 24,\n            isHalf: true,\n            emptyIcon: /*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"far fa-star\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 201,\n              columnNumber: 28\n            }, this),\n            halfIcon: /*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fa fa-star-half-alt\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 202,\n              columnNumber: 27\n            }, this),\n            fullIcon: /*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fa fa-star\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 203,\n              columnNumber: 27\n            }, this),\n            activeColor: \"#ffd700\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 196,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"hr\", {\n            size: \"10px\",\n            width: \"300vw\",\n            color: \"#D7D7D7\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 206,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"text\", {\n            style: {\n              fontSize: \"20px\",\n              marginTop: \"20px\"\n            },\n            children: \"\\uC5B4\\uB5A4 \\uC810\\uC774 \\uC88B\\uC558\\uB098\\uC694?\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 207,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(InputContent, {\n            placeholder: \"\\uCD5C\\uC18C 10\\uC790 \\uC774\\uC0C1 \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694.\",\n            onChange: inputContentChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 208,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"file\",\n            accept: \"image/*\",\n            onChange: processImage,\n            id: \"input-file\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 210,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"footer\", {\n          children: /*#__PURE__*/_jsxDEV(RegisterButton, {\n            onClick: addReview,\n            children: \"\\uB9AC\\uBDF0 \\uB4F1\\uB85D\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 213,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 9\n    }, this) : null\n  }, void 0, false);\n}\n\n_s(WriteReviewPage, \"l+TEzla/28LRJuZZbIwAfu50We4=\");\n\n_c6 = WriteReviewPage;\nexport default WriteReviewPage;\n\nvar _c, _c2, _c3, _c4, _c5, _c6;\n\n$RefreshReg$(_c, \"Input\");\n$RefreshReg$(_c2, \"InputConsol\");\n$RefreshReg$(_c3, \"InputContent\");\n$RefreshReg$(_c4, \"Button\");\n$RefreshReg$(_c5, \"RegisterButton\");\n$RefreshReg$(_c6, \"WriteReviewPage\");","map":{"version":3,"sources":["/Users/minjukim/Documents/GitHub/Pork-Potatoes-Back/Pork-Potatoes-Front-main/food-major/src/pages/WriteReviewPage.js"],"names":["React","Component","useState","styled","logo","search","fontSize","Rating","ReactStars","makeStyles","axios","https","swal","Input","div","InputConsol","input","InputContent","Button","button","UploadButton","RegisterButton","agent","Agent","rejectUnauthorized","WriteReviewPage","props","open","closeModal","inputRestaurant","setInputRestaurant","inputMenu","setInputMenu","inputContent","setInputContent","score","setScore","imageUrl","setImageUrl","file","setFile","processImage","event","imageFile","target","files","url","URL","createObjectURL","successAddReview","buttons","timer","failAddReview","inputRestaurantChange","keyword","value","inputMenuChange","inputContentChange","ratingChanged","newRating","addReview","restaurantObject","getRestaurant","userObject","getUser","formData","FormData","append","console","log","Object","values","toString","parseFloat","Date","response","post","status","e","restaurantdata","get","httpsAgent","resNum","data","restaurantNum","url2","color","marginTop"],"mappings":"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","sourcesContent":["import React, { Component,useState } from \"react\";\nimport styled from \"styled-components\";\nimport '../components/Modals/Modal.css';\nimport logo from '../assets/logo.png';\nimport search from '../assets/search.png';\nimport { fontSize } from \"@material-ui/system\";\nimport Rating from '@material-ui/lab/Rating';\nimport ReactStars from \"react-rating-stars-component\";\nimport { makeStyles } from '@material-ui/core/styles';\nimport axios from \"axios\";\nimport https from \"https\";\nimport swal from \"sweetalert\";\n\nconst Input = styled.div`\n    display:flex;\n    justify-content: space-around;\n    align-items: center;\n    border-radius: 4px;\n    box-shadow: 0px 4px 4px rgba(51, 51, 51, 0.08), 0px 4px 16px rgba(51, 51, 51, 0.08);\n    width:35vw;\n    height:5vh;\n    border: none;\n    margin-bottom: 15px;\n`\nconst InputConsol = styled.input`\n    border: none;\n    outline: none;\n    width: 35vw;\n    height: 4vh;\n` \n\nconst InputContent = styled.input`\n    border: gray;\n    outline: none;\n    background-color: #F4F4F4;\n    width: 35vw;\n    height: 20vh;\n    margin-top:14px;\n    margin-bottom: 14px;\n` \nconst Button = styled.button`\n    background-color: white;\n    border: none;\n    width: 24px;\n    height: 24px;\n`\n\nconst UploadButton = styled.button`\n  width:35vw;\n  height:8vh;\n  margin-top: 10px;\n  background-color: white;\n  border: dashed 1px #999999;\n  text-align: center;\n`\n\nconst RegisterButton = styled.button`\n  width:25vw;\n  min-height: 4vh;\n  max-height:8vh;\n  margin-top: 20px;\n  background-color: white;\n  border:solid 1px #BABABA;\n  border-radius: 32px;\n  text-align: center;\n  color:#F06D58;\n`\nconst agent = new https.Agent({\n  rejectUnauthorized: false\n});\n\nfunction WriteReviewPage (props) {\n  const {open,closeModal}=props;\n  const [inputRestaurant,setInputRestaurant]=useState('');\n  const [inputMenu,setInputMenu]=useState('');\n  const [inputContent,setInputContent]=useState('');\n  const [score,setScore]=useState(5);\n  const [imageUrl,setImageUrl]=useState(null);\n  const [file,setFile]=useState(null);\n\n  const processImage = (event) => {\n    const imageFile = event.target.files[0];\n    const url = URL.createObjectURL(imageFile);\n    setImageUrl({url});\n    setFile({imageFile});\n  }\n  const successAddReview = () => {\n    swal(\"리뷰가 등록되었습니다.\", {\n      buttons: false,\n      timer: 1000,\n    });\n    closeModal();\n  }\n  const failAddReview = () => {\n    swal(\"리뷰 등록에 실패했습니다..\", {\n      buttons: false,\n      timer: 1000,\n    });\n    closeModal();\n  }\n  const inputRestaurantChange=(event)=>{\n    const keyword=event.target.value;\n    setInputRestaurant({keyword})\n  }\n  const inputMenuChange=(event)=>{\n    const keyword=event.target.value;\n    setInputMenu({keyword})\n  }\n  const inputContentChange=(event)=>{\n    const keyword=event.target.value;\n    setInputContent({keyword})\n  }\n  const ratingChanged = (newRating) => {\n    setScore({newRating});\n  };\n  const addReview = async () => {\n    const restaurantObject=await getRestaurant();\n    const userObject=await getUser();\n    try{\n      const formData=new FormData();\n      formData.append('file',file);\n      console.log('file ',file);\n      console.log('formData ',formData);\n      console.log('resobj',restaurantObject)\n      console.log('userobj',userObject)\n      console.log(Object.values(inputContent).toString())\n      console.log(parseFloat(Object.values(score).toString()))\n      console.log(new Date())\n      const response = await axios.post('https://www.matzipmajor.com/api/reviews',\n      {\"image\":formData,\n        \"requestDto\":{\n          \"restaurant\":restaurantObject,\n          \"user\":userObject,\n          \"content\":Object.values(inputContent).toString(),\n          \"score\":parseFloat(Object.values(score).toString()),\n          \"anonymousFlag\":true,\n          \"menuName\":Object.values(inputMenu).toString(),\n          \"tagFood\":'분식',\n          \"tagMood\":'회식',\n          \"createdDate\":new Date(),\n        }\n      });\n      console.log(response)\n      response.status===200 ? successAddReview() : failAddReview();\n    }\n    catch(e){\n      console.log('reviewUpload error');\n    }\n  }\n  const getRestaurant= async () => {\n    try{\n      const url=\"https://www.matzipmajor.com/api/search?q=\"+Object.values(inputRestaurant).toString();\n      const restaurantdata = await axios.get(url, {httpsAgent: agent});\n      const resNum = restaurantdata.data[0].restaurantNum;\n      const url2=\"https://www.matzipmajor.com/api/restaurants/\"+resNum;\n      const restaurantObject = await axios.get(url2, {httpsAgent: agent});\n      return restaurantObject.data;\n    }\n    catch(e){\n      console.log(\"getRestaurant error\");\n    }\n  }\n  const getUser= async () => {\n    try{\n      const url=\"https://www.matzipmajor.com/api/users/\"+1;\n      const userObject = await axios.get(url, {httpsAgent: agent});\n      return userObject.data;\n    }\n    catch(e){\n      console.log(\"getUser error\");\n    }\n  }\n\n\n  return (\n    <>\n    {open?(\n        <div className='modal'>\n          <section>\n            <header>\n              <img src={logo} height='40px'></img>\n              <button className=\"close\" onClick={closeModal}></button>\n            </header>\n            <main>\n              <Input>\n                <Button><img src={search} alt=\"search\" height=\"15px\"/></Button>\n                <InputConsol placeholder=\"맛집 이름을 입력해 주세요\"\n                onChange={inputRestaurantChange}/>\n              </Input>\n              <Input>\n                <Button><img src={search} alt=\"search\" height=\"15px\"/></Button>\n                <InputConsol placeholder=\"메뉴를 입력해 주세요\"\n                onChange={inputMenuChange}/>\n              </Input>\n              <text style={{color:\"rgb(17,17,17,0.48)\", fontSize:\"18px\",marginTop:\"11px\"}}>선택하세요</text>\n              <ReactStars\n                count={5}\n                onChange={ratingChanged}\n                size={24}\n                isHalf={true}\n                emptyIcon={<i className=\"far fa-star\"></i>}\n                halfIcon={<i className=\"fa fa-star-half-alt\"></i>}\n                fullIcon={<i className=\"fa fa-star\"></i>}\n                activeColor=\"#ffd700\"\n              />\n              <hr size=\"10px\" width=\"300vw\" color=\"#D7D7D7\" />\n              <text style={{fontSize:\"20px\",marginTop:\"20px\"}}>어떤 점이 좋았나요?</text>\n              <InputContent placeholder=\"최소 10자 이상 입력해주세요.\" \n              onChange={inputContentChange}/>\n              <input type=\"file\" accept=\"image/*\" onChange={processImage} id=\"input-file\"/> \n            </main>\n            <footer>\n              <RegisterButton onClick={addReview} >리뷰 등록</RegisterButton>\n            </footer>\n          </section>\n        </div>\n    ):null}\n    </>\n  );\n}\n\nexport default WriteReviewPage;"]},"metadata":{},"sourceType":"module"}