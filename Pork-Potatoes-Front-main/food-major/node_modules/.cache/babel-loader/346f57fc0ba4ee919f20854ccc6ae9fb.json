{"ast":null,"code":"import _regeneratorRuntime from\"/Users/minjukim/Documents/GitHub/Pork-Potatoes-Back/Pork-Potatoes-Front-main/food-major/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/minjukim/Documents/GitHub/Pork-Potatoes-Back/Pork-Potatoes-Front-main/food-major/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/minjukim/Documents/GitHub/Pork-Potatoes-Back/Pork-Potatoes-Front-main/food-major/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/minjukim/Documents/GitHub/Pork-Potatoes-Back/Pork-Potatoes-Front-main/food-major/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/minjukim/Documents/GitHub/Pork-Potatoes-Back/Pork-Potatoes-Front-main/food-major/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/minjukim/Documents/GitHub/Pork-Potatoes-Back/Pork-Potatoes-Front-main/food-major/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import _taggedTemplateLiteral from\"/Users/minjukim/Documents/GitHub/Pork-Potatoes-Back/Pork-Potatoes-Front-main/food-major/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject,_templateObject2,_templateObject3,_templateObject4,_templateObject5,_templateObject6,_templateObject7,_templateObject8,_templateObject9,_templateObject10,_templateObject11,_templateObject12;import{Restaurant}from'@material-ui/icons';import React,{useState}from'react';import styled from\"styled-components\";import restaurantIcon from\"../assets/restaurantIcon.png\";import reviewIcon from\"../assets/reviewIcon.png\";import Review from\"../components/Review\";import image from\"../assets/reviewImg.png\";import NewRestaurant from'../components/NewRestaurant';import Sort from'../components/Sort.js';import axios from'axios';import https from\"https\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Filtering=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  display: flex;\\n  flex-direction: row;\\n  justify-content: center;\\n  width:100%;\\n  height:70px;\\n  margin-top: 70px;\\n  position: fixed;\\n  background-color: white;\\n  box-shadow: 0px 2px 10px 0px silver;\\n  z-index:99;\\n\"])));var TagBox=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  display: flex;\\n  flex-direction: row;\\n  justify-content: center;\\n  position: fixed;\\n  height:60px;\\n  width: 80%;\\n  padding-top:10px;\\n  padding-left: 363px;\\n  padding-right: 363px;\\n  background-color: white;\\n\\n\"])));var TagButton=styled.button(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n  background: #ED6C54;\\n  color:white;\\n  font-size: 1rem;\\n  height: 48px;\\n  text-align: center;\\n  margin-left:8px;\\n  margin-right:8px;\\n  padding-left: 28px;\\n  padding-right: 28px;\\n  border-radius: 38px;\\n  border:none;\\n\"])));var Main=styled.div(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"\\n  display: flex;\\n  flex-direction: column;\\n  width: 80%;\\n  margin-left: 10%;\\n  margin-right: 10%;\\n  height: 900px;\\n  padding-top:140px;\\n\"])));var Result=styled.div(_templateObject5||(_templateObject5=_taggedTemplateLiteral([\"\\n  display: flex;\\n  flex-direction: row;\\n  justify-content: space-between;\\n  align-content: center;\\n  width: 80%;\\n  margin-left: 10%;\\n  margin-right: 10%;\\n  height: 70px;\\n  padding-top:0px;\\n\"])));var SearchRestaurant=styled.div(_templateObject6||(_templateObject6=_taggedTemplateLiteral([\"\\n  display: flex;\\n  flex-direction: column;\\n  width: 80%;\\n  margin-left: 10%;\\n  margin-right: 10%;\\n  height:450px;\\n  padding-top:10px;\\n\"])));var SearchReview=styled.div(_templateObject7||(_templateObject7=_taggedTemplateLiteral([\"\\n  display: flex;\\n  flex-direction: column;\\n  width: 80%;\\n  margin-left: 10%;\\n  margin-right: 10%;\\n  min-height: 900px;\\n  padding-top:20px;\\n\"])));var Text=styled.text(_templateObject8||(_templateObject8=_taggedTemplateLiteral([\"\\n  font-size: 2.5rem;\\n  padding-left: 10px;\\n  font-weight: bold;\\n\"])));var Contents=styled.div(_templateObject9||(_templateObject9=_taggedTemplateLiteral([\"\\n  display:flex;\\n  flex-direction: row;\\n  justify-content: space-evenly;\\n  align-items: center;\\n  flex-wrap: wrap;\\n  padding: 20px;\\n  max-height: 500px;\\n  overflow-y: auto;\\n\"])));var Grid=styled.div(_templateObject10||(_templateObject10=_taggedTemplateLiteral([\"\\n  display: grid;\\n  grid-template-columns: 1fr 1fr 1fr;\\n\"])));var agent=new https.Agent({rejectUnauthorized:false});var Line_style=styled.div(_templateObject11||(_templateObject11=_taggedTemplateLiteral([\"\\n  border-top: #EFEFEF solid 1px;\\n  display: flex;\\n  flex-direction: row;\\n  justify-content: flex-end;\\n  padding: 15px;\\n  margin-top: 10px;\\n  margin-bottom: 10px;\\n\"])));var Select=styled.select(_templateObject12||(_templateObject12=_taggedTemplateLiteral([\"\\n  border: 1px solid silver;\\n  outline:none;\\n  width: 150px;\\n  height: 30px;\\n\"])));var SearchPage=/*#__PURE__*/function(_React$Component){_inherits(SearchPage,_React$Component);var _super=_createSuper(SearchPage);function SearchPage(props){var _this;_classCallCheck(this,SearchPage);_this=_super.call(this,props);_this.inputSearch=_this.props.location.state.inputSearch;_this.getRecentReviews=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(inputSearch){var url,_yield$axios$get,reviews;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;url=\"https://www.matzipmajor.com/api/reviews?query=\"+Object.values({inputSearch:inputSearch}).toString()+\"&sort=-created-date\";_context.next=4;return axios.get(url,{httpsAgent:agent});case 4:_yield$axios$get=_context.sent;reviews=_yield$axios$get.data;_this.setState({reviews:reviews});_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](0);console.log(\"getRecentReviews error\");case 12:case\"end\":return _context.stop();}}},_callee,null,[[0,9]]);}));return function(_x){return _ref.apply(this,arguments);};}();_this.getScoreReviews=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(inputSearch){var url,_yield$axios$get2,reviews;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;url=\"https://www.matzipmajor.com/api/reviews?query=\"+Object.values({inputSearch:inputSearch}).toString()+\"&sort=-score\";_context2.next=4;return axios.get(url,{httpsAgent:agent});case 4:_yield$axios$get2=_context2.sent;reviews=_yield$axios$get2.data;_this.setState({reviews:reviews});_context2.next=12;break;case 9:_context2.prev=9;_context2.t0=_context2[\"catch\"](0);console.log(\"getScoreReviews error\");case 12:case\"end\":return _context2.stop();}}},_callee2,null,[[0,9]]);}));return function(_x2){return _ref2.apply(this,arguments);};}();_this.getLikeReviews=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(inputSearch){var url,_yield$axios$get3,reviews;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;url=\"https://www.matzipmajor.com/api/reviews?query=\"+Object.values({inputSearch:inputSearch}).toString()+\"&sort=-liked-cnt\";_context3.next=4;return axios.get(url,{httpsAgent:agent});case 4:_yield$axios$get3=_context3.sent;reviews=_yield$axios$get3.data;_this.setState({reviews:reviews});window.localStorage.setItem('restaurantNum',reviews.restaurant.restaurantNum);_context3.next=13;break;case 10:_context3.prev=10;_context3.t0=_context3[\"catch\"](0);console.log(\"getLikeReviews error\");case 13:case\"end\":return _context3.stop();}}},_callee3,null,[[0,10]]);}));return function(_x3){return _ref3.apply(this,arguments);};}();_this.getRestaurants=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(inputSearch){var url,_yield$axios$get4,restaurants;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.prev=0;url=\"https://www.matzipmajor.com/api/search?q=\"+Object.values({inputSearch:inputSearch}).toString();_context4.next=4;return axios.get(url,{httpsAgent:agent});case 4:_yield$axios$get4=_context4.sent;restaurants=_yield$axios$get4.data;_this.setState({restaurants:restaurants});_context4.next=12;break;case 9:_context4.prev=9;_context4.t0=_context4[\"catch\"](0);console.log(\"getRestaurants error\");case 12:case\"end\":return _context4.stop();}}},_callee4,null,[[0,9]]);}));return function(_x4){return _ref4.apply(this,arguments);};}();_this.selectChange=function(event,inputSearch){var selectValue=event.target.value;if(selectValue==='별점순'){_this.getScoreReviews(inputSearch);}else if(selectValue==='인기순'){_this.getLikeReviews(inputSearch);}else{_this.getRecentReviews(inputSearch);}};_this.state={reviews:[],restaurants:[],filteredReviews:[]};return _this;}_createClass(SearchPage,[{key:\"render\",value:function render(){var _this2=this;var inputSearch=this.props.location.state.inputSearch;this.getRecentReviews(inputSearch);this.getRestaurants(inputSearch);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Filtering,{children:/*#__PURE__*/_jsxs(TagBox,{children:[/*#__PURE__*/_jsx(TagButton,{className:\"eatTogether\",children:\"\\uD68C\\uC2DD\"}),/*#__PURE__*/_jsx(TagButton,{className:\"eatAlone\",children:\"\\uD63C\\uBC25\"}),/*#__PURE__*/_jsx(TagButton,{className:\"eatPromise\",children:\"\\uBC25\\uC57D\"}),/*#__PURE__*/_jsx(TagButton,{className:\"eatDate\",children:\"\\uB370\\uC774\\uD2B8\"}),/*#__PURE__*/_jsx(TagButton,{className:\"eatFamily\",children:\"\\uAC00\\uC871\"})]})}),/*#__PURE__*/_jsxs(Main,{children:[/*#__PURE__*/_jsxs(Result,{children:[/*#__PURE__*/_jsxs(\"h2\",{children:[inputSearch,\" \\uAC80\\uC0C9\\uACB0\\uACFC\"]}),/*#__PURE__*/_jsx(Line_style,{children:/*#__PURE__*/_jsxs(Select,{onChange:function onChange(event){return _this2.selectChange(event,_this2.inputSearch);},children:[/*#__PURE__*/_jsx(\"option\",{selected:true,value:\"\\uCD5C\\uC2E0\\uC21C\",children:\"\\uCD5C\\uC2E0\\uC21C\\uC73C\\uB85C\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\uBCC4\\uC810\\uC21C\",children:\"\\uBCC4\\uC810\\uC21C\\uC73C\\uB85C\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\uC778\\uAE30\\uC21C\",children:\"\\uC778\\uAE30\\uC21C\\uC73C\\uB85C\"})]})})]}),/*#__PURE__*/_jsxs(SearchRestaurant,{children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"img\",{src:restaurantIcon,alt:\"restaurant\",height:\"40rem\",width:\"40rem\"}),/*#__PURE__*/_jsx(Text,{children:\"\\uC2DD\\uB2F9\"}),/*#__PURE__*/_jsx(\"hr\",{size:\"10px\",width:\"100%\",color:\"#D1D1D1\"})]}),/*#__PURE__*/_jsx(Contents,{children:Object.values(this.state.restaurants).map(function(restaurant){return/*#__PURE__*/_jsx(NewRestaurant,{restaurantNum:restaurant.restaurantNum,restaurantName:restaurant.restaurantName,address:restaurant.address,avgScore:restaurant.avgScore});})})]}),/*#__PURE__*/_jsxs(SearchReview,{children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"img\",{src:reviewIcon,alt:\"review\",height:\"40rem\",width:\"40rem\"}),/*#__PURE__*/_jsx(Text,{children:\"\\uB9AC\\uBDF0\"}),/*#__PURE__*/_jsx(\"hr\",{size:\"10px\",width:\"100%\",color:\"#D1D1D1\"})]}),/*#__PURE__*/_jsx(Grid,{children:Object.values(this.state.reviews).map(function(review){return/*#__PURE__*/_jsx(Review,{reviewNum:review.reviewNum,image:review.filePath,content:review.content,restaurantName:review.restaurant.restaurantName,menuName:review.menuName,tagFood:review.tagFood,tagMood:review.tagMood,score:review.score,createdDate:review.createdDate,likedCnt:review.likedCnt});})})]})]})]});}}]);return SearchPage;}(React.Component);;export default SearchPage;","map":{"version":3,"sources":["/Users/minjukim/Documents/GitHub/Pork-Potatoes-Back/Pork-Potatoes-Front-main/food-major/src/pages/SearchPage.js"],"names":["Restaurant","React","useState","styled","restaurantIcon","reviewIcon","Review","image","NewRestaurant","Sort","axios","https","Filtering","div","TagBox","TagButton","button","Main","Result","SearchRestaurant","SearchReview","Text","text","Contents","Grid","agent","Agent","rejectUnauthorized","Line_style","Select","select","SearchPage","props","inputSearch","location","state","getRecentReviews","url","Object","values","toString","get","httpsAgent","reviews","data","setState","console","log","getScoreReviews","getLikeReviews","window","localStorage","setItem","restaurant","restaurantNum","getRestaurants","restaurants","selectChange","event","selectValue","target","value","filteredReviews","map","restaurantName","address","avgScore","review","reviewNum","filePath","content","menuName","tagFood","tagMood","score","createdDate","likedCnt","Component"],"mappings":"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","sourcesContent":["import { Restaurant } from '@material-ui/icons';\nimport React,{useState} from 'react';\nimport styled from \"styled-components\";\nimport restaurantIcon from \"../assets/restaurantIcon.png\";\nimport reviewIcon from \"../assets/reviewIcon.png\";\nimport Review from \"../components/Review\";\nimport image from \"../assets/reviewImg.png\";\nimport NewRestaurant from '../components/NewRestaurant';\nimport Sort from '../components/Sort.js';\nimport axios from 'axios';\nimport https from \"https\";\n\n\nconst Filtering = styled.div`\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  width:100%;\n  height:70px;\n  margin-top: 70px;\n  position: fixed;\n  background-color: white;\n  box-shadow: 0px 2px 10px 0px silver;\n  z-index:99;\n`\n\nconst TagBox = styled.div`\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  position: fixed;\n  height:60px;\n  width: 80%;\n  padding-top:10px;\n  padding-left: 363px;\n  padding-right: 363px;\n  background-color: white;\n\n`\n\nconst TagButton = styled.button`\n  background: #ED6C54;\n  color:white;\n  font-size: 1rem;\n  height: 48px;\n  text-align: center;\n  margin-left:8px;\n  margin-right:8px;\n  padding-left: 28px;\n  padding-right: 28px;\n  border-radius: 38px;\n  border:none;\n`\n\nconst Main = styled.div`\n  display: flex;\n  flex-direction: column;\n  width: 80%;\n  margin-left: 10%;\n  margin-right: 10%;\n  height: 900px;\n  padding-top:140px;\n`\n\nconst Result = styled.div`\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-content: center;\n  width: 80%;\n  margin-left: 10%;\n  margin-right: 10%;\n  height: 70px;\n  padding-top:0px;\n`\n\nconst SearchRestaurant = styled.div`\n  display: flex;\n  flex-direction: column;\n  width: 80%;\n  margin-left: 10%;\n  margin-right: 10%;\n  height:450px;\n  padding-top:10px;\n`\n\nconst SearchReview = styled.div`\n  display: flex;\n  flex-direction: column;\n  width: 80%;\n  margin-left: 10%;\n  margin-right: 10%;\n  min-height: 900px;\n  padding-top:20px;\n`\n\nconst Text = styled.text`\n  font-size: 2.5rem;\n  padding-left: 10px;\n  font-weight: bold;\n`\n\nconst Contents = styled.div`\n  display:flex;\n  flex-direction: row;\n  justify-content: space-evenly;\n  align-items: center;\n  flex-wrap: wrap;\n  padding: 20px;\n  max-height: 500px;\n  overflow-y: auto;\n`\n\nconst Grid = styled.div`\n  display: grid;\n  grid-template-columns: 1fr 1fr 1fr;\n`\n\nconst agent = new https.Agent({\n  rejectUnauthorized: false\n});\n\nconst Line_style = styled.div`\n  border-top: #EFEFEF solid 1px;\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-end;\n  padding: 15px;\n  margin-top: 10px;\n  margin-bottom: 10px;\n`\nconst Select = styled.select`\n  border: 1px solid silver;\n  outline:none;\n  width: 150px;\n  height: 30px;\n`\n\n\nclass SearchPage extends React.Component {\n  inputSearch = this.props.location.state.inputSearch;\n  constructor(props){\n    super(props);\n    this.state = {\n      reviews: [],\n      restaurants: [],\n      filteredReviews:[]\n    }\n  }\n  getRecentReviews = async (inputSearch) => {\n    try{\n      const url=\"https://www.matzipmajor.com/api/reviews?query=\"+Object.values({inputSearch}).toString()+\"&sort=-created-date\";\n      const {data: reviews} = await axios.get(url, {httpsAgent: agent});\n      this.setState({ reviews });\n    }\n    catch(e){\n      console.log(\"getRecentReviews error\");\n    }\n  }\n  getScoreReviews = async (inputSearch) => {\n    try{\n      const url=\"https://www.matzipmajor.com/api/reviews?query=\"+Object.values({inputSearch}).toString()+\"&sort=-score\";\n      const {data: reviews} = await axios.get(url, {httpsAgent: agent});\n      this.setState({ reviews });\n    }\n    catch(e){\n      console.log(\"getScoreReviews error\");\n    }\n  }\n  getLikeReviews = async (inputSearch) => {\n    try{\n      const url=\"https://www.matzipmajor.com/api/reviews?query=\"+Object.values({inputSearch}).toString()+\"&sort=-liked-cnt\";\n      const {data: reviews} = await axios.get(url, {httpsAgent: agent});\n      this.setState({ reviews });\n      window.localStorage.setItem('restaurantNum', reviews.restaurant.restaurantNum);\n    }\n    catch(e){\n      console.log(\"getLikeReviews error\");\n    }\n  }\n  getRestaurants= async (inputSearch) => {\n    try{\n      const url=\"https://www.matzipmajor.com/api/search?q=\"+Object.values({inputSearch}).toString();\n      const {data: restaurants} = await axios.get(url, {httpsAgent: agent});\n      this.setState({ restaurants });\n    }\n    catch(e){\n      console.log(\"getRestaurants error\");\n    }\n  }\n\n  selectChange=(event,inputSearch)=>{\n    const selectValue=event.target.value;\n    if (selectValue ==='별점순'){this.getScoreReviews(inputSearch)}\n    else if (selectValue ==='인기순'){this.getLikeReviews(inputSearch)}\n    else {this.getRecentReviews(inputSearch)}\n  }\n\n  render(){\n  const inputSearch = this.props.location.state.inputSearch;\n  this.getRecentReviews(inputSearch);\n  this.getRestaurants(inputSearch);\n  return ( \n    <div>\n    <Filtering>\n      <TagBox>\n        <TagButton className='eatTogether'>회식</TagButton>\n        <TagButton className='eatAlone'>혼밥</TagButton>\n        <TagButton className='eatPromise'>밥약</TagButton>\n        <TagButton className='eatDate'>데이트</TagButton>\n        <TagButton className='eatFamily'>가족</TagButton>\n      </TagBox>\n    </Filtering>\n    <Main>\n      <Result>\n        <h2>{inputSearch} 검색결과</h2>\n        <Line_style>\n        <Select onChange={(event)=>this.selectChange(event,this.inputSearch)}>\n            <option selected value=\"최신순\">최신순으로</option>\n            <option value=\"별점순\">별점순으로</option>\n            <option value=\"인기순\">인기순으로</option>\n        </Select>\n      </Line_style>\n      </Result>\n      <SearchRestaurant>\n        <div>\n          <img src={restaurantIcon} alt=\"restaurant\" height=\"40rem\" width=\"40rem\"/>\n          <Text>식당</Text>\n          <hr size=\"10px\" width=\"100%\" color=\"#D1D1D1\" />\n        </div>\n        <Contents>\n          {Object.values(this.state.restaurants).map((restaurant) =>\n            <NewRestaurant \n            restaurantNum={restaurant.restaurantNum}\n            restaurantName={restaurant.restaurantName} \n            address={restaurant.address} \n            avgScore={restaurant.avgScore} \n            />\n          )}\n        </Contents>\n      </SearchRestaurant>\n      <SearchReview>\n        <div>\n          <img src={reviewIcon} alt=\"review\" height=\"40rem\" width=\"40rem\"/>\n          <Text>리뷰</Text>\n          <hr size=\"10px\" width=\"100%\" color=\"#D1D1D1\" />\n        </div>\n        <Grid>\n            {Object.values(this.state.reviews).map((review) =>\n              <Review reviewNum={review.reviewNum}\n                image={review.filePath}\n                content={review.content}\n                restaurantName={review.restaurant.restaurantName}\n                menuName={review.menuName}\n                tagFood={review.tagFood}\n                tagMood={review.tagMood}\n                score={review.score}\n                createdDate={review.createdDate}\n                likedCnt={review.likedCnt}\n                />\n            )}\n        </Grid>\n      </SearchReview>\n    </Main>\n    </div>\n  );\n  }\n};\n\nexport default SearchPage;"]},"metadata":{},"sourceType":"module"}